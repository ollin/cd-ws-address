task cleanWorkspace(group: "workspace") {
    doLast {
        def dirName = "$rootDir/00-workspace/"
        file(dirName).list().each {
            f ->
                if (f.endsWith('.githold')) return
                delete "${dirName}/${f}"
        }
    }
}

def commonSync(uebungNummer) {
    return {
        group "workspace"
        dependsOn 'cleanWorkspace'
        from fileTree("$rootDir/${uebungNummer}-uebung") {
            exclude '.gradle'
            exclude 'build'
        }
        into "$rootDir/00-workspace/"
    }
}

project.rootDir.eachDirMatch({ new File(it).name.contains("uebung")}) { dir ->

    def uebungNummer = dir.name.minus("-uebung")

    task "sync${uebungNummer}"(type: Sync) {
        configure commonSync(uebungNummer)
    }
}




task wrapper(type: Wrapper) {
    gradleVersion = '3.0'
}


