task cleanWorkspace(group: "workspace") {
    doLast {
        def dirName = "$rootDir/workspace/"
        file(dirName).list().each {
            f ->
                if (f.endsWith('.githold')) return
                delete "${dirName}/${f}"
        }
    }
}

def commonSync(uebungNummer) {
    return {
        group "workspace"
        dependsOn 'cleanWorkspace'
        from fileTree("$rootDir/handson-${uebungNummer}") {
            exclude '.gradle'
            exclude 'build'
        }
        into "$rootDir/workspace/"
    }
}

project.rootDir.eachDirMatch({ new File(it).name.contains("handson-")}) { dir ->

    def uebungNummer = dir.name.minus("handson-")

    task "sync${uebungNummer}"(type: Sync) {
        configure commonSync(uebungNummer)
    }
}




task wrapper(type: Wrapper) {
    gradleVersion = '4.4'
}


